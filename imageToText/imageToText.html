<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div class="container">
  <h1>ğŸ–¼ï¸ ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (OCR)</h1>
  <div id="dropArea" class="drop-area">ì´ë¯¸ì§€ë¥¼ ì—¬ê¸°ì— ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ì„¸ìš”</div>
  <textarea id = 'output' value = "" style="width: 100%;"></textarea>
  </div>
  <script src='https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js'></script>
</body>
<style>
  .drop-area {
    margin-top: 20px;
    padding: 30px;
    border: 2px dashed #007bff;
    text-align: center;
    color: #007bff;
    border-radius: 10px;
}

.drop-area.hover {
    background-color: #e0f0ff;
}
</style>
<script>
  function recognize(file){
    Tesseract.recognize(
        file,
        'eng+kor', // ì˜ì–´ì¼ ê²½ìš° eng, ë‘˜ ë‹¤: eng+kor
        { logger: m => { console.log(m) } }  // ì¸ì‹ ì§„í–‰ ìƒíƒœ ê´€ë ¨ ë¡œê·¸
      )
      .then(({ data: { text } }) => { 
        console.log(text);
        const rowCount = text.split(/\r\n|\r|\n/).length;
        const targetTextarea = document.getElementById("output");
        targetTextarea.value = text;

        if(rowCount < 4)
          targetTextarea.style.height="52px"; //íŠ¹ì • ì¤„ ìˆ˜ ë³´ë‹¤ ì‘ì•„ì§€ë©´ heightê°€ ì´ê²ƒë³´ë‹¤ ì‘ì•„ì§€ì§€ ì•Šì•˜ìœ¼ë©´ í•œë‹¤
        else
          targetTextarea.style.height= (rowCount * 18) + "px";
        return text;
      })
      .catch (err => { console.error(err); });
  }

  document.addEventListener("DOMContentLoaded", () => {
    const dropArea = document.getElementById("dropArea");

    dropArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropArea.classList.add("hover");
    });

    dropArea.addEventListener("dragleave", () => {
        dropArea.classList.remove("hover");
    });

    dropArea.addEventListener("drop", (e) => {
        e.preventDefault();
        dropArea.classList.remove("hover");
        const file = e.dataTransfer.files[0];
        if (!file || !file.type.startsWith("image/")) {
            output.textContent = "ì´ë¯¸ì§€ íŒŒì¼ì„ ì˜¬ë ¤ì£¼ì„¸ìš”.";
            return;
        }
        recognize(file);
    });
});
</script>
</html>
